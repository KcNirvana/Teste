{"time":"0011","tplId":"QUICKPAY@cashier-channel-logo-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-channel-logo-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var getTag=amc.fn.getById;var show=amc.fn.show;var hide=amc.fn.hide;var create=amc.fn.create;var rpc=amc.rpcData;var PATH=amc.path+\"alipay_msp_\";var HUI_PNG=PATH+\"hui\";var FAN_PNG=PATH+\"fan\";var BUSY_PNG=PATH+\"busy\";var RECOMMEND_PNG=PATH+\"recommend\";var CHARGE_FREE_PNG=PATH+\"free\";var GOU_PNG=PATH+\"gou\";var windowWidth=window.innerWidth||0;function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var c=rpc.exit?amc.res.close:amc.res.arrowLeft;var e=rpc.setting?\"{{setting}}\":null;var f=amc.fn.iNav(c,\"{{sel_pay_tool}}\",e,null,onBack,gotoSetting);getTag(\"body\").insertBefore(f,getTag(\"iLine\"));if(getTag(\"iNavBoxR\")&&getTag(\"iNavBoxL\")){getTag(\"iNavBoxR\").style.width=amc.isPlus?85:75;getTag(\"iNavBoxL\").style.width=amc.isPlus?85:75}var d=(rpc.payments&&rpc.payments.length)||0;for(var b=0;b<d;b++){createPaymentItem(rpc.payments[b]);createChildren(rpc.payments[b]);var a=create(\"div\",\"amc-1px-line\"+(b<d-1?\" amc-margin-lr\":\"\"),getTag(\"channel\"))}}function createPaymentItem(k,d){if(!k.disable){k.detailAction=\"\"}var h=windowWidth-(amc.isPlus?40:30);var m=d?\" amc-font-s\":\"amc-font-l\";var e=d?\"pd-tb-child amc-pd-lr\":\"amc-pd\";var j=create(\"div\",e+\" amc-align-center\",getTag(\"channel\"));j.style.minHeight=amc.isPlus?64:54;var l=createLogo(j,k,d);h-=amc.isPlus?40:35;var g=create(\"div\",\"amc-v-box-center\",j);var a=create(\"div\",\"amc-align-center\",g);var c=create(\"label\",m+\" amc-ellipsis\",a);c.innerText=k.name||\"\";if(k.tail){var f=create(\"label\",m+\" amc-ellipsis\",a);f.innerText=k.tail;h-=amc.isPlus?60:50}if(k.rec){var i=create(\"img\",\"icon-wide\",a);i.src=RECOMMEND_PNG;h-=35}if(k.hui){var i=create(\"img\",\"icon\",a);i.src=HUI_PNG;h-=19}if(k.fan){var i=create(\"img\",\"icon\",a);i.src=FAN_PNG;h-=19}if(k.busy){var i=create(\"img\",\"icon\",a);i.src=BUSY_PNG;h-=19}var b=createDetails(g,k,d);if(k.disable){disableItem(j,k,l,a)}else{if(!k.children||!k.children.length){bandOnclickEvent(j,k,d);h-=30}}h=max(h,amc.isPlus?180:110);c.style.maxWidth=h;return j}function max(d,c){return d>c?d:c}function disableItem(a,c,b,d){if(!a||!c){return}if(c.detailAction){if(b){b.style.opacity=0.3}if(d){d.style.opacity=0.3}}else{a.style.opacity=0.3;a.disabled=true}}function createDetails(f,h,a){if(!f||!h||!h.detail){return}var c=create(\"div\",\"amc-align-center amc-margin-t-xs\",f);var i=a?\"amc-font-s\":\"amc-font-xs\";var d=i+\" amc-flex-1 amc-text-slight-color\"+(h.chargeFree?\" amc-line-through\":\"\");var b=create(\"label\",d+\" amc-ellipsis-3-line\",c);b.innerText=h.detail;if(h.detailAction){b.onclick=function(){var j={action:{name:h.detailAction,loadtxt:\"\"}};document.submit(j);if(h.dlg&&h.dlg[\"btnRightAction\"]){setTimeout(function(){showDlg(h.dlg)},1000)}}}if(h.chargeFree){b.className+=\" amc-ellipsis\";b.style.flex=0;var e=create(\"img\",\"icon\",c);e.src=CHARGE_FREE_PNG;var g=windowWidth-(amc.isPlus?110:95)-20;b.style.maxWidth=max(g,amc.isPlus?180:150)}}function createLogo(a,d,b){if(!d||d.add){return}var c=create(\"div\",\"channel-logo-size amc-margin-r-s amc-align-center amcjustify-center\",a);if(!b&&d.logo){var e=create(\"img\",\"channel-logo-size\",c);if(d.logo.indexOf(\"local:\")===0){e.src=amc.path+d.logo.substr(\"local:\".length)}else{e.src=d.logo}e.defaultvalue=PATH+\"bank_logo\"}return c}function bandOnclickEvent(a,d,c){if(!a||!d){return}a.className+=\" amc-press-box\";var b=create(\"div\",\"amc-align-center amc-justify-center right-img-box\",a);var e=create(\"img\",\"\",b);if(d.checked){e.src=GOU_PNG}else{if(d.add){e.src=amc.res.arrowRight}}a.onclick=function(){if(d.checked){amc.fn.back();return}var f={action:{name:\"/cashier/switchChannelSel\",loadtxt:\"\"},param:{selected_channel:(c?d.parentValue:d.value),first_enter_cashier:false}};if(c){f.param[\"child_channel\"]=d.childValue}if(!d.add){f.action[\"l2rmode\"]=\"1\"}e.src=amc.res.indicator;document.asyncSubmit(f,function(g){if(g.pageloading===\"1\"){e.src=amc.res.indicator}else{if(g.pageloading===\"0\"){e.src=d.add?amc.res.arrowRight:\"\"}}})}}function createChildren(b){var a=b&&b.children;if(!a||!a.length){return}for(var d=0;d<a.length;d++){var c=create(\"div\",\"amc-1px-line amc-margin-lr\",getTag(\"channel\"));c.style.marginLeft=amc.isPlus?60:50;a[d][\"parentValue\"]=b.value;createPaymentItem(a[d],true)}}function gotoSetting(){if(rpc.setting){document.submit({action:{name:\"/forward/setting\"}})}}function onBack(){if(rpc.exit){amc.fn.exitConfirm()}else{amc.fn.back()}}function onKeyDown(){if(event.which==4){onBack()}}function showDlg(a){if(!a||!a.btnRight||!a.dlgTxt||!a.btnLeft||!a.btnRight){return}getTag(\"dlgTxt\").innerText=a.dlgTxt;getTag(\"btnLeft\").innerText=a.btnLeft;getTag(\"btnRight\").innerText=a.btnRight;getTag(\"btnRight\").onclick=function(){var b={action:{name:a.btnRightAction}};document.submit(b);getTag(\"dlg\").close()};getTag(\"dlg\").showModal()};","tag":"text"}]},{"tag":"style","children":[{"text":".channel-logo-size {\n    height: 25px;\n    width: 25px;\n}\n.icon {\n    margin-left: 5px;\n    height: 14px;\n    align-self: center;\n}\n.icon-wide {\n    margin-left: 5px;\n    height: 14px;\n    align-self: center;\n}\n.right-img-box {\n    width: 25px;\n    margin-left: 5px;\n}\n.pd-tb-child {\n    padding-top: 8px;\n    padding-bottom : 8px;\n}\n.btn-text{font-weight:bold;color:#108ee9;margin: 15px 0;}\n.btn-vertical-line{width:1px; align-self:stretch; margin: 7px 0;background-color:#e5e5e5;}\n.dlg-title{\n    -webkit-line-clamp:4;\n    -webkit-box-orient:vertical;\n    display:-webkit-box;\n}","tag":"text"}]}]},{"id":"body","onload":"init();","tag":"body","children":[{"id":"iLine","tag":"div","css":"amc-1px-title-line"},{"tag":"div","children":[{"tag":"div","children":[{"id":"channel","tag":"div","css":"amc-scroll-flex"}],"css":"amc-flex-1"}],"css":"amc-flex-1"},{"id":"dlg","tag":"dialog","children":[{"id":"dlgTxt","tag":"label","css":"amc-font-m amc-text-center amc-margin dlg-title"},{"tag":"div","children":[{"tag":"div","css":"amc-adapt-line"},{"tag":"div","children":[{"id":"btnLeft","tag":"label","onclick":"getTag('dlg').close();","css":"btn-text amc-font-xxl amc-flex-1 amc-text-center amc-ellipsis-2-line"},{"tag":"div","css":"btn-vertical-line"},{"id":"btnRight","tag":"label","css":"btn-text amc-font-xxl amc-flex-1 amc-text-center amc-ellipsis-2-line"}],"css":"amc-align-center amc-justify-center"}],"css":"amc-v-box amc-justify-center amc-dlg-width"}],"css":"amc-dlg-box amc-v-box"}],"onkeydown":"onKeyDown();","css":"amc-i-body"}]},"format":"JSON","tplVersion":"5.0.8"}